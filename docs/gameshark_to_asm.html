<!DOCTYPE html>
<html>
<body>

<h2>Nintendo 64 Gameshark to ASM Converter</h2>

<table>
	<tr>
		<td><center>Paste Gameshark codes here</center>
			
		</td>
		<td>
			<center>ASM will be generated here</center>
		</td>
	</tr>
	<tr>
		<td>
			<form name=gamesharkForm>
				<textarea name = 'gamesharkTextBox' rows=30 cols=20></textarea>
			</form>
		</td>
		<td>
			<form name=asmForm>
				<textarea name = 'asmTextBox' rows=30 cols=60></textarea>
				<br>
			</form>
		</td>
	</tr>
	<tr>
		<td></td>
		<td>
			<form name=convertButtonForm>
				<button type='button' name='convertButton' onClick='convertGamesharkCodeToASM()'>Convert Gamshark Code to ASM</button>
			</form>
		</td>
	</tr>

</table>

Credits: 

Created by <a href='https://github.com/kfkaplan/nintendo64_hacking'>Triclon</a>.

ASM from the EnHacklopedia section on Gameshark Code Handler Hacking: <a href=https://github.com/kfkaplan/nintendo64_hacking>https://doc.kodewerx.org/hacking_n64.html#gs_code_handler</a>


Changelog:
v0.1 - First attempt.  Supports 80 and 81 code types.  

<script>

function convertGamesharkCodeToASM() //Function converts Gameshark codes found in gamesharkTextBox to ASM printed to asmTextBox
{
	//document.asmForm.asmTextBox.value = '' //Blank output to await new output
	output = '' //Blank output to await new output
	gamesharkCodeBlock = gamesharkForm.gamesharkTextBox.value //Grab Gameshark codes as a giant code block
	gamesharkCodes = gamesharkCodeBlock.split('\n') //Seperate Gameshark code black into an array of codes
	nGamesharkCodes = gamesharkCodes.length //Count number of gameshark codes in the block
	for (i=0; i<nGamesharkCodes; i++) //Loop through and process each gameshark code
	{
		gamesharkCode = gamesharkCodes[i].toUpperCase()
		codeType = gamesharkCode.substring(0,2)
		memAddress = gamesharkCode.substring(2,8)
		if ( (codeType == '80') || (codeType == '88') || (codeType == 'D0') || (codeType == 'D2') || (codeType == 'DA') || (codeType == 'F0'))
		{
			codeValue = gamesharkCode.substring(11,13)
		}
		else if ((codeType == '81') || (codeType == '89') || (codeType == 'D1') || (codeType == 'D9') || (codeType == 'D3') || (codeType == 'DB') || (codeType == 'F1'))
		{
			codeValue = gamesharkCode.substring(9,13)
		}
		else
		{
			document.asmForm.asmTextBox.value = 'ERROR.  Unrecognized code type.\nLine ' + (i+1) + ': ' + gamesharkCode //Throw error message if something goes wrong
			break
		}
		if (codeType == '80')
		{
			output += 'LUI $K0, 0x80'+ memAddress.substring(0,2) + '\n'
			output += 'ORI $K0, 0x'+ memAddress.substring(2,6) + '\n'
			output += 'ADDIU $K1, $ZERO, 0x00'+codeValue+'\n'
			output += 'SB $K1, 0x0000 ($K0)\n'
		}
		if (codeType == '81')
		{
			output += 'LUI $K0, 0x80'+ memAddress.substring(0,2) + '\n'
			output += 'ORI $K0, 0x'+ memAddress.substring(2,6) + '\n'
			output += 'ADDIU $K1, $ZERO, 0x'+codeValue+'\n'
			output += 'SH $K1, 0x0000 ($K0)\n'
		}
		//document.asmForm.asmTextBox.value += output
		//document.asmForm.asmTextBox.value += codeType + ' ' + codeValue + '\n'
	}
	output += 'LUI $K0,0x8000\n'
	output += 'ORI $K0,$K0,0x0120\n'
	output += 'JR $K0\n'
	output += 'ADD $ZERO,$ZERO,$ZERO\n'

	document.asmForm.asmTextBox.value = output //Actually output the final batch of code to the text box

}

</script>

</body>
</html>